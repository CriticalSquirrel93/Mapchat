<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% block title %}{% endblock %} | MapChat: A More Local Social Network</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Load Vendor Resources -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
    {% block header_content %}
    	<header class="bg-primary text-white">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <a class="navbar-brand" href="/">
                <i class="bi bi-geo d-inline-block align-top"></i>
                <!--<img src="logo.png" alt="Mapchat Logo" width="30" height="30" class="bi bi-geo d-inline-block align-top">-->
                Mapchat
            </a>
            <!--Navigation Bar-->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    {% if user.is_authenticated %}
                        <a class="nav-link text-white" href="/home">Home</a>
                        <a class="nav-link text-white" href="/settings">Settings</a>
                    	<li class="nav-item">
                            <a class="nav-link text-white" href="/logout">Logout</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link text-white" href="/login">Join/Login</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </nav>
    </header>

    <style>
        body{
            background-color: white;
            color: black;
        }
        .dark-mode{
            background-color: #202124;
            color: white;
        }
    </style>

    <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.19.0/firebase-auth.js"></script>
    <script>

        var firebaseConfig = {
            apiKey: "AIzaSyCwzsTIBBd48KlI1IG7hjSuiTQqshaBmV4",
            authDomain: "mapchat-ef869.firebaseapp.com",
            databaseURL: "https://mapchat-ef869-default-rtdb.firebaseio.com",
            projectId: "mapchat-ef869",
            storageBucket: "mapchat-ef869.appspot.com",
            messagingSenderId: "233501723438",
            appId: "1:233501723438:web:5b23fa135663362db808bf",
            measurementId: "G-7XG223B24F"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        firebase.auth().onAuthStateChanged((user) => {
        if (user) {
            firebase.database().ref().child('Data').child('Users')
            .child(user.uid).child('Settings').once('value').then(function(snapshot){
                var d = snapshot.val().dark;
                if ( d ){
                    dark();
                }
            });
        }
        });
        
        function dark() {
            var element = document.body;
            element.classList.toggle("dark-mode");
        }
    </script>
    {% endblock %}
    {% block body_content %}
    {% endblock %}
    {% block footer_content %}
        <footer class="text-center fixed-bottom py-3 bg-dark text-white">
            <p>&copy; 2023 Mapchat. All rights reserved.</p>
        </footer>
    {% endblock %}
</body>
</html>